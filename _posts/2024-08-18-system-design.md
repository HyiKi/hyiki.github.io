---
title: 系统设计指南
date:  2024-08-18 20:30:00 +0800
category: Reference
tags: [SYSTEM DESIGN]
excerpt: 系统设计指南，读书笔记，持续更新中。。。
---

* content
{:toc}

# 为什么要学习系统设计？ Why should I learn system design?

在过去的二十年里，大型Web应用程序取得了很多进步。这些进步重新定义了我们思考软件开发的方式。我们每天使用的所有应用程序和服务，如Facebook，Instagram和Twitter，都是可扩展的系统。全世界有数十亿人同时访问这些系统，因此它们需要设计为**处理大量流量和数据**。这就是系统设计的用武之地。

作为一名软件开发人员，你将越来越多地被要求理解系统设计概念以及如何应用它们。在你职业生涯的早期阶段，学习系统设计将使你更有信心地解决软件设计问题，并将设计原则应用到日常工作中。当你在职业生涯中取得进步，开始面试更高级别的职位时，系统设计将成为你面试过程中更大的一部分。因此，无论您的级别是什么，系统设计对您都很重要。

由于其日益重要，我们希望创建一个资源来帮助您浏览系统设计的世界。本指南详细介绍了系统设计的基本概念，并将您链接到相关资源，以帮助您获得更深入的理解并获得实际操作经验。

> 系统设计的用武之地：处理数以亿计的大量流量和数据

# 什么是系统设计？ What is System Design?

系统设计是为满足特定需求的系统定义体系结构、接口和数据的过程。系统设计通过连贯和高效的系统满足您的业务或组织的需求。一旦您的企业或组织确定了其需求，您就可以开始将其构建到满足客户需求的物理系统设计中。您设计系统的方式将取决于您是否想进行**定制开发、商业解决方案或两者的组合**。

系统设计需要系统的方法来构建和工程系统。一个好的系统设计需要考虑基础设施中的所有内容，**从硬件和软件，一直到数据及其存储方式**。

> HOW? 设计系统的方式：定制开发、商业解决方案或两者的组合
>
> WHAT? 设计系统的内容：从硬件和软件，一直到数据及其存储方式

# 系统设计基础 System Design fundamentals

## 水平和垂直缩放 Horizontal and vertical scaling

可伸缩性是指应用程序在不牺牲延迟的情况下处理和承受增加的工作负载的能力。应用程序需要强大的计算能力才能很好地扩展。服务器应该足够强大，以处理增加的流量负载。有两种主要的方法来扩展应用程序：水平和垂直。

**水平扩展或横向扩展意味着向现有硬件资源池添加更多硬件。**它增加了整个系统的计算能力。**垂直扩展或向上扩展意味着为您的服务器添加更多功能。**它增加了运行应用程序的硬件的能力。

![image-20240818221659879](https://raw.githubusercontent.com/HyiKi/picgo-asset/main/image-20240818221659879.png)

这两种缩放方式各有利弊。您将遇到需要考虑权衡并决定哪种类型的扩展最适合您的用例的场景。

> 水平扩展：硬件资源扩展配置
>
> 垂直扩展：添加服务器资源数量

## 微服务 Microservices

[微服务](https://www.educative.io/edpresso/what-are-microservices)或微服务架构是一种架构风格，使用松散耦合的服务构建应用程序。它将大型应用程序划分为一组独立的模块化服务。这些模块可以独立开发、部署和维护。

![image-20240818212258678](https://raw.githubusercontent.com/HyiKi/picgo-asset/main/image-20240818212258678.png)

> 在微架构系统中，每个微服务都有一个团队在工作。

![image-20240818213339370](https://raw.githubusercontent.com/HyiKi/picgo-asset/main/image-20240818213339370.png)

> 随着团队#1的增长超过了单个微服务的限制，我们可以轻松地扩展微服务以满足团队不断变化的需求。

微服务的运行速度比传统的单片应用程序快得多，也更可靠。由于应用程序被分解为独立的服务，每个服务都有自己的逻辑和代码库。这些服务可以通过应用程序编程接口（API）相互通信。

如果你想开发一个更具可扩展性的应用程序，微服务是理想的选择。使用微服务，由于其现代功能和模块，扩展应用程序要容易得多。如果您与大型或不断增长的组织合作，微服务对您的团队非常有用，因为它们更容易随着时间的推移进行扩展和自定义。

## 代理服务器 Proxy servers

代理服务器或转发代理充当用户和Internet之间的通道。它将最终用户与他们正在浏览的网站分开。代理服务器不仅转发用户请求，还提供许多好处，例如：

* 改进的安全性
* 改善隐私
* 访问被阻止的资源
* 控制员工和儿童的互联网使用
* 缓存数据以加速请求

每当用户从终端服务器发送一个地址请求时，流量在到达该地址的途中会流经代理服务器。当请求返回到用户时，它通过同一代理服务器流回，然后将其转发给用户。

![image-20240819161429344](https://raw.githubusercontent.com/HyiKi/picgo-asset/main/image-20240819161429344.png)

> 转发代理
> 正向代理：VPN
> 反向代理：<https://cloudflare-call.hyiki.sbs/>

## CAP定理 CAP theorem

CAP定理是系统设计领域中的一个基本定理。它指出分布式系统只能同时提供三个属性中的两个：**一致性、可用性和分区容限**。该定理形式化了存在分区时一致性和可用性之间的权衡。

![image-20240819161709430](https://raw.githubusercontent.com/HyiKi/picgo-asset/main/image-20240819161709430.png)

> CAP理论
> 【CA】满足ACID理论，例如传统的关系型数据库：MySQL、Oracle
> 【AP】保证可用性 & 分区容错性，不要求实时的一致性，例如：ES
> 【CP】满足BASE理论，例如基于Raft分布式系统协议，选举过程是不可用的：Redis
>
> 延伸：BASE理论，CAP理论的放松版本
> 【BA】基本可用
> 【S】软状态，系统可能会处于一种中间状态，**系统允许短暂的不一致性**
> 【E】最终一致性
> 【核心思想】 即使无法做到强一致性（Strong consistency），但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性（Eventual consistency）。

## 冗余和复制 Redundancy and replication

冗余是复制系统的关键组件的过程，目的是提高系统的可靠性或整体性能。它通常以备份或故障安全的形式出现。冗余在消除系统中的单点故障并在需要时提供备份方面发挥着关键作用。例如，如果我们在生产环境中运行一个服务的两个实例，其中一个实例失败了，系统可以**故障转移**到另一个实例。

![image-20240819205329483](https://raw.githubusercontent.com/HyiKi/picgo-asset/main/image-20240819205329483.png)

**复制是共享信息以确保冗余资源之间的一致性的过程**。您可以复制软件或硬件组件以提高可靠性、容错性或可访问性。复制在许多数据库管理系统（DBMS）中使用，通常在原始数据库和其副本之间具有主副本关系。主服务器接收所有更新，这些更新通过副本服务器传递。每个副本服务器在成功接收到更新时都会输出一条消息。

![image-20240819205903358](https://raw.githubusercontent.com/HyiKi/picgo-asset/main/image-20240819205903358.png)
